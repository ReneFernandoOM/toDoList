(()=>{"use strict";const e=(()=>{let e=[];const t=t=>e[t];return{getProjects:()=>e,addProject:(t,a)=>{let n=e.push(((e,t)=>{let d=[];return{getToDos:()=>d,getToDo:e=>d[e],addToDo:e=>{d.push(e)},removeToDo:e=>{d.splice(e,1)},getTitle:()=>e,getDescription:()=>t}})(t,a))-1;d.renderTaskModal(n)},deleteProject:t=>{e.splice(t,1)},getProject:t,addToDoToProject:(e,a,n,l,o)=>{let i=((e,t,d,a)=>{const n={0:"Baja",1:"Normal",2:"Alta"},l=e=>{a=n[e]};return l(a),{setPriority:l,getToDoInfo:()=>{console.log(e,t,d,a)},getTitle:()=>e,getDescription:()=>t,getDueDate:()=>d,getPriority:()=>a,getPriorityLevel:()=>Object.keys(n).find((e=>n[e]===a))}})(a,n,l,o);t(e).addToDo(i),d.toDoRender(e)}}})(),t=(()=>{const t=()=>{document.querySelectorAll(".todo-checked").forEach((e=>{e.addEventListener("click",(()=>{e.classList.contains("checked")?e.classList.remove("checked"):e.classList.add("checked")}))})),document.querySelectorAll(".todo-info").forEach((e=>{e.addEventListener("click",(()=>{let t=e.id.split("-")[1],d=e.id.split("-")[2],a=document.querySelector(`#todoInfo-${t}-${d}`);a.style.maxHeight?a.style.maxHeight=null:a.style.maxHeight="40em"}))})),document.querySelectorAll(".todo-remove").forEach((t=>{t.addEventListener("click",(()=>{let a=t.id.split("-")[1],n=t.id.split("-")[2];e.getProject(a).removeToDo(n),d.toDoRender(a)}))})),document.querySelectorAll(".todo-edit").forEach((e=>{e.addEventListener("click",(()=>{const t=e.id.split("-")[1],d=e.id.split("-")[2];document.querySelector(`#editTaskModal-${t}-${d}`).classList.add("modal-active")}))}))};return t(),{addListeners:t}})(),d=(()=>{const d=document.querySelector("#projectsList");return{renderProjectsList:()=>{let t=e.getProjects();d.innerHTML="",t.forEach(((e,t)=>{let a=document.createElement("li");a.innerText=e.getTitle(),a.id=`projList-${t}`,a.classList.add("proj-list-item"),d.appendChild(a)})),a.addListeners()},renderMainContainer:t=>{let d=e.getProject(t),a=document.querySelector(".main-container"),l=document.createElement("div"),o=document.createElement("div"),i=document.createElement("h4"),c=document.createElement("p");for(;a.lastElementChild;)a.removeChild(a.lastElementChild);l.classList.add("proj-info-container"),o.classList.add("proj-info"),i.classList.add("proj-title"),i.innerText=d.getTitle(),c.classList.add("proj-description"),c.innerText=d.getDescription(),o.appendChild(i),o.appendChild(c),l.appendChild(o);let r=document.createElement("div"),s=document.createElement("button");r.classList.add("add-btn-container"),s.classList.add("button","add-btn"),s.id=`addTasksBtn-${t}`,s.innerText="A침adir tarea",r.appendChild(s),l.appendChild(r),a.appendChild(l);let m=document.createElement("div");m.classList.add("todos-container"),a.appendChild(m),n.taskModalListener(t)},renderTaskModal:e=>{let t=document.querySelector("#mainContainer"),d=document.createElement("div"),a=document.createElement("div"),n=document.createElement("span"),l=document.createElement("div");d.classList.add("modal-bg"),d.id=`taskModal-${e}`,a.classList.add("modal"),n.classList.add("modal-close"),n.id=`closeTaskModal-${e}`,n.innerHTML="&times;",l.classList.add("modal-header"),l.innerText="A침adir tarea",a.appendChild(n),a.appendChild(l);let o=document.createElement("div"),i=document.createElement("div"),c=document.createElement("label"),r=document.createElement("input"),s=`taskName-${e}`,m=document.createElement("label"),p=document.createElement("textarea"),u=`taskDesc-${e}`;o.classList.add("modal-content-container","pb-0"),i.classList.add("modal-content","py-0"),c.htmlFor=s,c.innerText="Nombre de la tarea",r.id=s,r.type="text",m.htmlFor=u,m.innerText="Descripci칩n de la tarea",p.id=u,p.cols="30",p.rows="5",i.appendChild(c),i.appendChild(r),i.appendChild(m),i.appendChild(p),o.appendChild(i);let h=document.createElement("div"),E=document.createElement("label"),v=document.createElement("input"),L=`dueDate-${e}`,C=document.createElement("label"),T=document.createElement("select"),$=`prioridad-${e}`;h.classList.add("modal-task-info"),E.htmlFor=L,E.innerText="Fecha de vencimiento",v.id=L,v.type="date",C.htmlFor=$,C.innerText="Prioridad:",T.id=$,["Baja","Normal","Alta"].forEach(((e,t)=>{T.add(new Option(e,t))})),h.appendChild(E),h.appendChild(v),h.appendChild(C),h.appendChild(T),o.appendChild(h),a.appendChild(o);let y=document.createElement("div"),k=document.createElement("button");y.classList.add("button-row"),k.classList.add("button","submit-btn"),k.id=`addTask-${e}`,k.innerText="Agregar tarea",y.appendChild(k),a.appendChild(y),d.appendChild(a),t.appendChild(d)},toDoRender:d=>{let a=e.getProject(d),n=a.getToDos(),l=document.querySelector(".main-container"),o=document.querySelector(".todos-container");o.innerHTML="",n.forEach(((t,n)=>{let l=document.createElement("div"),i=document.createElement("div");i.classList.add("todo-main-info"),l.classList.add("todo-div");let c=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div");c.classList.add("todo-left"),r.classList.add("todo-checked"),s.classList.add("todo-name"),s.innerText=t.getTitle(),c.appendChild(r),c.appendChild(s);let m=document.createElement("div"),p=document.createElement("span"),u=document.createElement("i"),h=document.createElement("span"),E=document.createElement("i"),v=document.createElement("span"),L=document.createElement("i");m.classList.add("todo-right"),u.setAttribute("data-feather","edit"),p.classList.add("todo-edit"),p.id=`todoEditBtn-${d}-${n}`,p.appendChild(u),E.setAttribute("data-feather","x-square"),h.classList.add("todo-remove"),h.id=`todoRmvBtn-${d}-${n}`,h.appendChild(E),L.setAttribute("data-feather","info"),v.classList.add("todo-info"),v.id=`todoInfoBtn-${d}-${n}`,v.appendChild(L),m.appendChild(p),m.appendChild(h),m.appendChild(v),i.appendChild(c),i.appendChild(m),l.appendChild(i);let C=document.createElement("div"),T=document.createElement("div"),$=document.createElement("div"),y=document.createElement("div"),k=document.createElement("p"),g=document.createElement("p"),D=document.createElement("p");C.classList.add("todo-info-container"),C.id=`todoInfo-${d}-${n}`,T.classList.add("todo-content"),$.classList.add("todo-descrip"),$.innerText=t.getDescription(),y.classList.add("todo-all-info"),k.innerText=`Fecha: ${t.getDueDate()}`,g.innerText=`Prioridad: ${t.getPriority()}`,D.innerText=`Proyecto ${a.getTitle()}`,y.appendChild(k),y.appendChild(g),y.appendChild(D),T.appendChild($),T.appendChild(y),C.appendChild(T),l.appendChild(C),o.appendChild(l),((t,d)=>{const a=e.getProject(t).getToDo(d);let n=document.querySelector("#mainContainer"),l=document.createElement("div"),o=document.createElement("div"),i=document.createElement("span"),c=document.createElement("div");l.classList.add("modal-bg"),l.id=`editTaskModal-${t}-${d}`,o.classList.add("modal"),i.classList.add("modal-close"),i.id=`closeEditTaskModal-${t}-${d}`,i.innerHTML="&times;",c.classList.add("modal-header"),c.innerText="Editar tarea",o.appendChild(i),o.appendChild(c);let r=document.createElement("div"),s=document.createElement("div"),m=document.createElement("label"),p=document.createElement("input"),u=`editTaskName-${t}-${d}`,h=document.createElement("label"),E=document.createElement("textarea"),v=`editTaskDesc-${t}-${d}`;r.classList.add("modal-content-container","pb-0"),s.classList.add("modal-content","py-0"),m.htmlFor=u,m.innerText="Nombre de la tarea",p.id=u,p.value=a.getTitle(),p.type="text",h.htmlFor=v,h.innerText="Descripci칩n de la tarea",E.id=v,E.value=a.getDescription(),E.cols="30",E.rows="5",s.appendChild(m),s.appendChild(p),s.appendChild(h),s.appendChild(E),r.appendChild(s);let L=document.createElement("div"),C=document.createElement("label"),T=document.createElement("input"),$=`editDueDate-${t}-${d}`,y=document.createElement("label"),k=document.createElement("select"),g=`editPrioridad-${t}-${d}`;L.classList.add("modal-task-info"),C.htmlFor=$,C.innerText="Fecha de vencimiento",T.id=$,T.type="date",T.value=a.getDueDate(),y.htmlFor=g,y.innerText="Prioridad:",k.id=g,["Baja","Normal","Alta"].forEach(((e,t)=>{k.add(new Option(e,t))})),k.value=a.getPriorityLevel(),L.appendChild(C),L.appendChild(T),L.appendChild(y),L.appendChild(k),r.appendChild(L),o.appendChild(r);let D=document.createElement("div"),b=document.createElement("button");D.classList.add("button-row"),b.classList.add("button","submit-btn"),b.id=`editTask-${t}-${d}`,b.innerText="Editar tarea",D.appendChild(b),o.appendChild(D),l.appendChild(o),n.appendChild(l)})(d,n)})),l.appendChild(o),t.addListeners(),feather.replace()}}})(),a=(()=>{const e=()=>{document.querySelectorAll(".proj-list-item").forEach((e=>{e.addEventListener("click",(()=>{let t=e.id.split("-")[1];d.renderMainContainer(t),d.toDoRender(t)}))}))};return e(),{addListeners:e}})(),n=(()=>{const t=t=>{let d=document.querySelector(`#taskModal-${t}`);d=a(d,t);const n=document.querySelector(`#addTasksBtn-${t}`),l=document.querySelector(`#closeTaskModal-${t}`),o=document.querySelector(`#taskName-${t}`),i=document.querySelector(`#taskDesc-${t}`),c=document.querySelector(`#dueDate-${t}`),r=document.querySelector(`#prioridad-${t}`),s=document.querySelector(`#addTask-${t}`);l.addEventListener("click",(()=>{d.classList.remove("modal-active")})),n.addEventListener("click",(()=>{d.classList.add("modal-active")})),s.addEventListener("click",(()=>{d.classList.remove("modal-active"),e.addToDoToProject(t,o.value,i.value,c.value,r.value),o.value="",i.value="",c.value="",r.value=""}))},a=(e,t)=>{let d=e.cloneNode(!0);return e.parentNode.replaceChild(d,e),document.querySelector(`#taskModal-${t}`)};return(()=>{const t=document.querySelector("#addProjectMod"),a=document.querySelector("#addProjBtn"),n=document.querySelector("#projName"),l=document.querySelector("#projDesc"),o=document.querySelector("#projModal");document.querySelector("#closeProjModal").addEventListener("click",(()=>{o.classList.remove("modal-active")})),t.addEventListener("click",(()=>{o.classList.add("modal-active")})),a.addEventListener("click",(()=>{o.classList.remove("modal-active"),e.addProject(n.value,l.value),d.renderProjectsList(),n.value="",l.value=""}))})(),t("999"),{taskModalListener:t}})();feather.replace()})();