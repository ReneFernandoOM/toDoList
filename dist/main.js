(()=>{"use strict";const e=(()=>{let e=[];const t=t=>e[t];return{getProjects:()=>e,addProject:(t,a)=>{let n=e.push(((e,t)=>{let d=[];return{getToDos:()=>d,addToDo:e=>{d.push(e)},removeToDo:e=>{d.splice(e,1)},getTitle:()=>e,getDescription:()=>t}})(t,a))-1;d.renderTaskModal(n)},deleteProject:t=>{e.splice(t,1)},getProject:t,addToDoToProject:(e,a,n,o,l)=>{let c=((e,t,d,a)=>{const n={0:"Baja",1:"Normal",2:"Alta"},o=e=>{a=n[e]};return o(a),{setPriority:o,getToDoInfo:()=>{console.log(e,t,d,a)},getTitle:()=>e,getDescription:()=>t,getDueDate:()=>d,getPriority:()=>a}})(a,n,o,l);t(e).addToDo(c),d.toDoRender(e),console.log(`PROYECTO: ${e}`)}}})(),t=(()=>{const e=()=>{const e=document.querySelectorAll(".todo-checked"),t=document.querySelectorAll(".todo-info");e.forEach((e=>{e.addEventListener("click",(()=>{e.classList.contains("checked")?e.classList.remove("checked"):e.classList.add("checked")}))})),t.forEach((e=>{e.addEventListener("click",(()=>{let t=e.id.split("-")[1],d=e.id.split("-")[2],a=document.querySelector(`#todoInfo-${t}-${d}`);a.style.maxHeight?a.style.maxHeight=null:a.style.maxHeight="40em"}))}))};return e(),{addListeners:e}})(),d=(()=>{const d=document.querySelector("#projectsList");return{renderProjectsList:()=>{let t=e.getProjects();d.innerHTML="",t.forEach(((e,t)=>{let a=document.createElement("li");a.innerText=e.getTitle(),a.id=`projList-${t}`,a.classList.add("proj-list-item"),d.appendChild(a)})),a.addListeners()},renderMainContainer:t=>{let d=e.getProject(t),a=document.querySelector(".main-container"),o=document.createElement("div"),l=document.createElement("div"),c=document.createElement("h4"),i=document.createElement("p");for(;a.lastElementChild;)a.removeChild(a.lastElementChild);o.classList.add("proj-info-container"),l.classList.add("proj-info"),c.classList.add("proj-title"),c.innerText=d.getTitle(),i.classList.add("proj-description"),i.innerText=d.getDescription(),l.appendChild(c),l.appendChild(i),o.appendChild(l);let r=document.createElement("div"),s=document.createElement("button");r.classList.add("add-btn-container"),s.classList.add("button","add-btn"),s.id=`addTasksBtn-${t}`,s.innerText="Añadir tarea",r.appendChild(s),o.appendChild(r),a.appendChild(o);let m=document.createElement("div");m.classList.add("todos-container"),a.appendChild(m),n.taskModalListener(t)},renderTaskModal:e=>{let t=document.querySelector("#mainContainer"),d=document.createElement("div"),a=document.createElement("div"),n=document.createElement("span"),o=document.createElement("div");d.classList.add("modal-bg"),d.id=`taskModal-${e}`,a.classList.add("modal"),n.classList.add("modal-close"),n.id=`closeTaskModal-${e}`,n.innerHTML="&times;",o.classList.add("modal-header"),o.innerText="Añadir tarea",a.appendChild(n),a.appendChild(o);let l=document.createElement("div"),c=document.createElement("div"),i=document.createElement("label"),r=document.createElement("input"),s=`taskName-${e}`,m=document.createElement("label"),p=document.createElement("textarea"),u=`taskDesc-${e}`;l.classList.add("modal-content-container","pb-0"),c.classList.add("modal-content","py-0"),i.htmlFor=s,i.innerText="Nombre de la tarea",r.id=s,r.type="text",m.htmlFor=u,m.innerText="Descripción de la tarea",p.id=u,p.cols="30",p.rows="5",c.appendChild(i),c.appendChild(r),c.appendChild(m),c.appendChild(p),l.appendChild(c);let h=document.createElement("div"),E=document.createElement("label"),L=document.createElement("input"),v=`dueDate-${e}`,C=document.createElement("label"),T=document.createElement("select"),y=`prioridad-${e}`;h.classList.add("modal-task-info"),E.htmlFor=v,E.innerText="Fecha de vencimiento",L.id=v,L.type="date",C.htmlFor=y,C.innerText="Prioridad:",T.id=y,["Baja","Media","Alta"].forEach(((e,t)=>{T.add(new Option(e,t))})),h.appendChild(E),h.appendChild(L),h.appendChild(C),h.appendChild(T),l.appendChild(h),a.appendChild(l);let k=document.createElement("div"),g=document.createElement("button");k.classList.add("button-row"),g.classList.add("button","submit-btn"),g.id=`addTask-${e}`,g.innerText="Agregar tarea",k.appendChild(g),a.appendChild(k),d.appendChild(a),t.appendChild(d)},toDoRender:d=>{let a=e.getProject(d),n=a.getToDos(),o=document.querySelector(".main-container"),l=document.querySelector(".todos-container");l.innerHTML="",n.forEach(((e,t)=>{let n=document.createElement("div"),o=document.createElement("div");o.classList.add("todo-main-info"),n.classList.add("todo-div");let c=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div");c.classList.add("todo-left"),i.classList.add("todo-checked"),r.classList.add("todo-name"),r.innerText=e.getTitle(),c.appendChild(i),c.appendChild(r);let s=document.createElement("div"),m=document.createElement("span"),p=document.createElement("i"),u=document.createElement("span"),h=document.createElement("i"),E=document.createElement("span"),L=document.createElement("i");s.classList.add("todo-right"),p.setAttribute("data-feather","edit"),m.classList.add("todo-edit"),m.appendChild(p),h.setAttribute("data-feather","x-square"),u.classList.add("todo-remove"),u.appendChild(h),L.setAttribute("data-feather","info"),E.classList.add("todo-info"),E.id=`todoInfoBtn-${d}-${t}`,E.appendChild(L),s.appendChild(m),s.appendChild(u),s.appendChild(E),o.appendChild(c),o.appendChild(s),n.appendChild(o);let v=document.createElement("div"),C=document.createElement("div"),T=document.createElement("div"),y=document.createElement("div"),k=document.createElement("p"),g=document.createElement("p"),j=document.createElement("p");v.classList.add("todo-info-container"),v.id=`todoInfo-${d}-${t}`,C.classList.add("todo-content"),T.classList.add("todo-descrip"),T.innerText=e.getDescription(),y.classList.add("todo-all-info"),k.innerText=`Fecha: ${e.getDueDate()}`,g.innerText=`Prioridad: ${e.getPriority()}`,j.innerText=`Proyecto ${a.getTitle()}`,y.appendChild(k),y.appendChild(g),y.appendChild(j),C.appendChild(T),C.appendChild(y),v.appendChild(C),n.appendChild(v),l.appendChild(n)})),o.appendChild(l),t.addListeners(),feather.replace()}}})(),a=(()=>{const e=()=>{document.querySelectorAll(".proj-list-item").forEach((e=>{e.addEventListener("click",(()=>{let t=e.id.split("-")[1];d.renderMainContainer(t),d.toDoRender(t)}))}))};return e(),{addListeners:e}})(),n=(()=>{const t=t=>{let d=document.querySelector(`#taskModal-${t}`);d=a(d,t);const n=document.querySelector(`#addTasksBtn-${t}`),o=document.querySelector(`#closeTaskModal-${t}`),l=document.querySelector(`#taskName-${t}`),c=document.querySelector(`#taskDesc-${t}`),i=document.querySelector(`#dueDate-${t}`),r=document.querySelector(`#prioridad-${t}`),s=document.querySelector(`#addTask-${t}`);o.addEventListener("click",(()=>{d.classList.remove("modal-active")})),n.addEventListener("click",(()=>{d.classList.add("modal-active")})),s.addEventListener("click",(()=>{d.classList.remove("modal-active"),e.addToDoToProject(t,l.value,c.value,i.value,r.value),l.value="",c.value="",i.value="",r.value=""}))},a=(e,t)=>{let d=e.cloneNode(!0);return e.parentNode.replaceChild(d,e),document.querySelector(`#taskModal-${t}`)};return(()=>{const t=document.querySelector("#addProjectMod"),a=document.querySelector("#addProjBtn"),n=document.querySelector("#projName"),o=document.querySelector("#projDesc"),l=document.querySelector("#projModal");document.querySelector("#closeProjModal").addEventListener("click",(()=>{l.classList.remove("modal-active")})),t.addEventListener("click",(()=>{l.classList.add("modal-active")})),a.addEventListener("click",(()=>{l.classList.remove("modal-active"),e.addProject(n.value,o.value),d.renderProjectsList(),n.value="",o.value=""}))})(),t("999"),{taskModalListener:t}})();feather.replace()})();