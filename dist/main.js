(()=>{"use strict";const e=(()=>{let e=[];const t=t=>e[t];return{getProjects:()=>e,addProject:(t,a)=>{let n=e.push(((e,t)=>{let d=[];return{getToDos:()=>d,getToDo:e=>d[e],addToDo:e=>{d.push(e)},removeToDo:e=>{d.splice(e,1)},getTitle:()=>e,getDescription:()=>t}})(t,a))-1;d.renderTaskModal(n)},deleteProject:t=>{e.splice(t,1)},getProject:t,addToDoToProject:(e,a,n,o,l)=>{let i=((e,t,d,a)=>{const n={0:"Baja",1:"Normal",2:"Alta"},o=e=>{a=n[e]};return o(a),{getPriorityLevel:()=>Object.keys(n).find((e=>n[e]===a)),getToDoInfo:()=>{console.log(e,t,d,a)},getTitle:()=>e,getDescription:()=>t,getDueDate:()=>d,getPriority:()=>a,setPriority:o,setTitle:t=>e=t,setDescription:e=>t=e,setDueDate:e=>d=e}})(a,n,o,l);t(e).addToDo(i),d.toDoRender(e)}}})(),t=(()=>{const t=()=>{document.querySelectorAll(".todo-checked").forEach((e=>{e.addEventListener("click",(()=>{e.classList.contains("checked")?e.classList.remove("checked"):e.classList.add("checked")}))})),document.querySelectorAll(".todo-info").forEach((e=>{e.addEventListener("click",(()=>{let t=e.id.split("-")[1],d=e.id.split("-")[2],a=document.querySelector(`#todoInfo-${t}-${d}`);a.style.maxHeight?a.style.maxHeight=null:a.style.maxHeight="40em"}))})),document.querySelectorAll(".todo-remove").forEach((t=>{t.addEventListener("click",(()=>{let a=t.id.split("-")[1],n=t.id.split("-")[2],o=e.getProject(a);document.querySelector(`#editTaskModal-${a}-${n}`).remove(),o.removeToDo(n),d.toDoRender(a)}))})),document.querySelectorAll(".todo-edit").forEach((e=>{e.addEventListener("click",(()=>{const t=e.id.split("-")[1],d=e.id.split("-")[2];document.querySelector(`#editTaskModal-${t}-${d}`).classList.add("modal-active")}))}))};return t(),{addListeners:t}})(),d=(()=>{const d=document.querySelector("#projectsList");return{renderProjectsList:()=>{let t=e.getProjects();d.innerHTML="",t.forEach(((e,t)=>{let a=document.createElement("li");a.innerText=e.getTitle(),a.id=`projList-${t}`,a.classList.add("proj-list-item"),d.appendChild(a)})),a.addListeners()},renderMainContainer:t=>{let d=e.getProject(t),a=document.querySelector(".main-container"),o=document.createElement("div"),l=document.createElement("div"),i=document.createElement("h4"),c=document.createElement("p");for(;a.lastElementChild;)a.removeChild(a.lastElementChild);o.classList.add("proj-info-container"),l.classList.add("proj-info"),i.classList.add("proj-title"),i.innerText=d.getTitle(),c.classList.add("proj-description"),c.innerText=d.getDescription(),l.appendChild(i),l.appendChild(c),o.appendChild(l);let r=document.createElement("div"),s=document.createElement("button");r.classList.add("add-btn-container"),s.classList.add("button","add-btn"),s.id=`addTasksBtn-${t}`,s.innerText="A침adir tarea",r.appendChild(s),o.appendChild(r),a.appendChild(o);let m=document.createElement("div");m.classList.add("todos-container"),a.appendChild(m),n.taskModalListener(t)},renderTaskModal:e=>{let t=document.querySelector("#mainContainer"),d=document.createElement("div"),a=document.createElement("div"),n=document.createElement("span"),o=document.createElement("div");d.classList.add("modal-bg"),d.id=`taskModal-${e}`,a.classList.add("modal"),n.classList.add("modal-close"),n.id=`closeTaskModal-${e}`,n.innerHTML="&times;",o.classList.add("modal-header"),o.innerText="A침adir tarea",a.appendChild(n),a.appendChild(o);let l=document.createElement("div"),i=document.createElement("div"),c=document.createElement("label"),r=document.createElement("input"),s=`taskName-${e}`,m=document.createElement("label"),u=document.createElement("textarea"),p=`taskDesc-${e}`;l.classList.add("modal-content-container","pb-0"),i.classList.add("modal-content","py-0"),c.htmlFor=s,c.innerText="Nombre de la tarea",r.id=s,r.type="text",m.htmlFor=p,m.innerText="Descripci칩n de la tarea",u.id=p,u.cols="30",u.rows="5",i.appendChild(c),i.appendChild(r),i.appendChild(m),i.appendChild(u),l.appendChild(i);let h=document.createElement("div"),v=document.createElement("label"),E=document.createElement("input"),L=`dueDate-${e}`,C=document.createElement("label"),T=document.createElement("select"),$=`prioridad-${e}`;h.classList.add("modal-task-info"),v.htmlFor=L,v.innerText="Fecha de vencimiento",E.id=L,E.type="date",C.htmlFor=$,C.innerText="Prioridad:",T.id=$,["Baja","Normal","Alta"].forEach(((e,t)=>{T.add(new Option(e,t))})),h.appendChild(v),h.appendChild(E),h.appendChild(C),h.appendChild(T),l.appendChild(h),a.appendChild(l);let y=document.createElement("div"),k=document.createElement("button");y.classList.add("button-row"),k.classList.add("button","submit-btn"),k.id=`addTask-${e}`,k.innerText="Agregar tarea",y.appendChild(k),a.appendChild(y),d.appendChild(a),t.appendChild(d)},toDoRender:d=>{document.querySelectorAll(".edit-modal").forEach((e=>{e.remove()}));let a=e.getProject(d),o=a.getToDos(),l=document.querySelector(".main-container"),i=document.querySelector(".todos-container");i&&i.remove(),i=document.createElement("div"),i.classList.add("todos-container"),o.forEach(((t,o)=>{let l=document.createElement("div"),c=document.createElement("div");c.classList.add("todo-main-info"),l.classList.add("todo-div");let r=document.createElement("div"),s=document.createElement("div"),m=document.createElement("div");r.classList.add("todo-left"),s.classList.add("todo-checked"),m.classList.add("todo-name"),m.innerText=t.getTitle(),r.appendChild(s),r.appendChild(m);let u=document.createElement("div"),p=document.createElement("span"),h=document.createElement("i"),v=document.createElement("span"),E=document.createElement("i"),L=document.createElement("span"),C=document.createElement("i");u.classList.add("todo-right"),h.setAttribute("data-feather","edit"),p.classList.add("todo-edit"),p.id=`todoEditBtn-${d}-${o}`,p.appendChild(h),E.setAttribute("data-feather","x-square"),v.classList.add("todo-remove"),v.id=`todoRmvBtn-${d}-${o}`,v.appendChild(E),C.setAttribute("data-feather","info"),L.classList.add("todo-info"),L.id=`todoInfoBtn-${d}-${o}`,L.appendChild(C),u.appendChild(p),u.appendChild(v),u.appendChild(L),c.appendChild(r),c.appendChild(u),l.appendChild(c);let T=document.createElement("div"),$=document.createElement("div"),y=document.createElement("div"),k=document.createElement("div"),D=document.createElement("p"),g=document.createElement("p"),q=document.createElement("p");T.classList.add("todo-info-container"),T.id=`todoInfo-${d}-${o}`,$.classList.add("todo-content"),y.classList.add("todo-descrip"),y.innerText=t.getDescription(),k.classList.add("todo-all-info"),D.innerText=`Fecha: ${t.getDueDate()}`,g.innerText=`Prioridad: ${t.getPriority()}`,q.innerText=`Proyecto: ${a.getTitle()}`,k.appendChild(D),k.appendChild(g),k.appendChild(q),$.appendChild(y),$.appendChild(k),T.appendChild($),l.appendChild(T),i.appendChild(l),((t,d)=>{if(document.querySelector(`#editTaskModal-${t}-${d}`))return;const a=e.getProject(t).getToDo(d);let o=document.querySelector("#mainContainer"),l=document.createElement("div"),i=document.createElement("div"),c=document.createElement("span"),r=document.createElement("div");l.classList.add("modal-bg","edit-modal"),l.id=`editTaskModal-${t}-${d}`,i.classList.add("modal"),c.classList.add("modal-close"),c.id=`closeEditTaskModal-${t}-${d}`,c.innerHTML="&times;",r.classList.add("modal-header"),r.innerText="Editar tarea",i.appendChild(c),i.appendChild(r);let s=document.createElement("div"),m=document.createElement("div"),u=document.createElement("label"),p=document.createElement("input"),h=`editTaskName-${t}-${d}`,v=document.createElement("label"),E=document.createElement("textarea"),L=`editTaskDesc-${t}-${d}`;s.classList.add("modal-content-container","pb-0"),m.classList.add("modal-content","py-0"),u.htmlFor=h,u.innerText="Nombre de la tarea",p.id=h,p.value=a.getTitle(),p.type="text",v.htmlFor=L,v.innerText="Descripci칩n de la tarea",E.id=L,E.value=a.getDescription(),E.cols="30",E.rows="5",m.appendChild(u),m.appendChild(p),m.appendChild(v),m.appendChild(E),s.appendChild(m);let C=document.createElement("div"),T=document.createElement("label"),$=document.createElement("input"),y=`editDueDate-${t}-${d}`,k=document.createElement("label"),D=document.createElement("select"),g=`editPrioridad-${t}-${d}`;C.classList.add("modal-task-info"),T.htmlFor=y,T.innerText="Fecha de vencimiento",$.id=y,$.type="date",$.value=a.getDueDate(),k.htmlFor=g,k.innerText="Prioridad:",D.id=g,["Baja","Normal","Alta"].forEach(((e,t)=>{D.add(new Option(e,t))})),D.value=a.getPriorityLevel(),C.appendChild(T),C.appendChild($),C.appendChild(k),C.appendChild(D),s.appendChild(C),i.appendChild(s);let q=document.createElement("div"),S=document.createElement("button");q.classList.add("button-row"),S.classList.add("button","submit-btn"),S.id=`editTask-${t}-${d}`,S.innerText="Editar tarea",q.appendChild(S),i.appendChild(q),l.appendChild(i),o.appendChild(l),n.editTaskModalListener(t,d)})(d,o)})),l.appendChild(i),t.addListeners(),feather.replace()}}})(),a=(()=>{const e=()=>{document.querySelectorAll(".proj-list-item").forEach((e=>{e.addEventListener("click",(()=>{let t=e.id.split("-")[1];d.renderMainContainer(t),d.toDoRender(t)}))}))};return e(),{addListeners:e}})(),n=(()=>{const t=t=>{let d=document.querySelector(`#taskModal-${t}`);d=a(d,t);const n=document.querySelector(`#addTasksBtn-${t}`),o=document.querySelector(`#closeTaskModal-${t}`),l=document.querySelector(`#taskName-${t}`),i=document.querySelector(`#taskDesc-${t}`),c=document.querySelector(`#dueDate-${t}`),r=document.querySelector(`#prioridad-${t}`),s=document.querySelector(`#addTask-${t}`);o.addEventListener("click",(()=>{d.classList.remove("modal-active")})),n.addEventListener("click",(()=>{d.classList.add("modal-active")})),s.addEventListener("click",(()=>{d.classList.remove("modal-active"),e.addToDoToProject(t,l.value,i.value,c.value,r.value),l.value="",i.value="",c.value="",r.value=""}))},a=(e,t)=>{let d=e.cloneNode(!0);return e.parentNode.replaceChild(d,e),document.querySelector(`#taskModal-${t}`)};return(()=>{const t=document.querySelector("#addProjectMod"),a=document.querySelector("#addProjBtn"),n=document.querySelector("#projName"),o=document.querySelector("#projDesc"),l=document.querySelector("#projModal");document.querySelector("#closeProjModal").addEventListener("click",(()=>{l.classList.remove("modal-active")})),t.addEventListener("click",(()=>{l.classList.add("modal-active")})),a.addEventListener("click",(()=>{l.classList.remove("modal-active"),e.addProject(n.value,o.value),d.renderProjectsList(),n.value="",o.value=""}))})(),t("999"),{taskModalListener:t,editTaskModalListener:(t,a)=>{const n=document.querySelector(`#editTaskModal-${t}-${a}`),o=document.querySelector(`#closeEditTaskModal-${t}-${a}`),l=document.querySelector(`#editTaskName-${t}-${a}`),i=document.querySelector(`#editTaskDesc-${t}-${a}`),c=document.querySelector(`#editDueDate-${t}-${a}`),r=document.querySelector(`#editPrioridad-${t}-${a}`),s=document.querySelector(`#editTask-${t}-${a}`);let m=e.getProject(t).getToDo(a);o.addEventListener("click",(()=>{n.classList.remove("modal-active"),l.value=m.getTitle(),i.value=m.getDescription(),c.value=m.getDueDate(),r.value=m.getPriorityLevel()})),s.addEventListener("click",(()=>{let e=document.querySelector(`#todoInfo-${t}-${a}`);e.parentNode.removeChild(e),m.setTitle(l.value),m.setDescription(i.value),m.setDueDate(c.value),m.setPriority(r.value),n.classList.remove("modal-active"),n.parentNode.removeChild(n),d.toDoRender(t)}))}}})();feather.replace()})();